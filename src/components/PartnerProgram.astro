---
import { translations, type Language } from "../lib/i18n";

interface Props {
  lang: Language;
}

const { lang = "ja" } = Astro.props;
const t = translations[lang].partnerProgram;
---

<section class="py-20 bg-gradient-to-br from-blue-50 to-indigo-100">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2
        class="text-3xl md:text-4xl font-bold text-gray-900 mb-4"
        id="partner-program-title"
      >
        {t.title}
      </h2>
      <p class="text-xl text-gray-600" id="partner-program-subtitle">
        {t.subtitle}
      </p>
    </div>

    <div class="max-w-4xl mx-auto">
      <div class="bg-white rounded-2xl shadow-xl p-8 md:p-12">
        <div class="text-center mb-8">
          <div
            class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6 overflow-hidden"
          >
            <img
              src="/images/penguin.png"
              alt="Partner Program"
              class="w-20 h-20 object-cover"
            />
          </div>
          <h3
            class="text-2xl font-bold text-gray-900 mb-4"
            id="partner-program-heading"
          >
            {t.heading}
          </h3>
        </div>

        <div class="prose prose-lg max-w-none text-gray-700 mb-8">
          <p
            class="text-center text-lg leading-relaxed"
            id="partner-program-description"
          >
            {t.description}
          </p>
          <p
            class="text-center text-lg leading-relaxed mt-4"
            id="partner-program-contact-note"
          >
            {t.contactNote}
          </p>
        </div>

        <!-- Benefits List -->
        <div class="grid md:grid-cols-2 gap-6 mb-8">
          <div class="flex items-start space-x-3">
            <div
              class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"
            >
              <svg
                class="w-4 h-4 text-green-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"></path>
              </svg>
            </div>
            <div>
              <h4
                class="font-semibold text-gray-900"
                id="benefit-special-price-title"
              >
                {t.benefits.specialPrice.title}
              </h4>
              <p
                class="text-sm text-gray-600"
                id="benefit-special-price-description"
              >
                {t.benefits.specialPrice.description}
              </p>
            </div>
          </div>

          <div class="flex items-start space-x-3">
            <div
              class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"
            >
              <svg
                class="w-4 h-4 text-green-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"></path>
              </svg>
            </div>
            <div>
              <h4
                class="font-semibold text-gray-900"
                id="benefit-priority-support-title"
              >
                {t.benefits.prioritySupport.title}
              </h4>
              <p
                class="text-sm text-gray-600"
                id="benefit-priority-support-description"
              >
                {t.benefits.prioritySupport.description}
              </p>
            </div>
          </div>

          <div class="flex items-start space-x-3">
            <div
              class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"
            >
              <svg
                class="w-4 h-4 text-green-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"></path>
              </svg>
            </div>
            <div>
              <h4
                class="font-semibold text-gray-900"
                id="benefit-customization-title"
              >
                {t.benefits.customization.title}
              </h4>
              <p
                class="text-sm text-gray-600"
                id="benefit-customization-description"
              >
                {t.benefits.customization.description}
              </p>
            </div>
          </div>

          <div class="flex items-start space-x-3">
            <div
              class="flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"
            >
              <svg
                class="w-4 h-4 text-green-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"></path>
              </svg>
            </div>
            <div>
              <h4
                class="font-semibold text-gray-900"
                id="benefit-long-term-partnership-title"
              >
                {t.benefits.longTermPartnership.title}
              </h4>
              <p
                class="text-sm text-gray-600"
                id="benefit-long-term-partnership-description"
              >
                {t.benefits.longTermPartnership.description}
              </p>
            </div>
          </div>
        </div>

        <!-- CTA Button -->
        <div class="text-center">
          <a
            href="https://cor-jp.com/contact/"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl min-h-[48px]"
          >
            <svg
              class="w-5 h-5 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"
              ></path>
            </svg>
            <span id="partner-program-cta-button">{t.ctaButton}</span>
          </a>
        </div>

        <!-- Additional Info -->
        <div class="mt-8 text-center">
          <p class="text-sm text-gray-500" id="partner-program-additional-info">
            {t.additionalInfo}
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Partner Program section language switching
  document.addEventListener("DOMContentLoaded", function () {
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get("lang");
    const storedLang = localStorage.getItem("preferred-language");
    const currentLang = urlLang || storedLang || "ja";
    updatePartnerProgramContent(currentLang);
    
    // Force Korean translation if needed
    if (currentLang === 'ko') {
      setTimeout(() => {
        forceKoreanPartnerProgramTranslation();
      }, 100);
      setTimeout(() => {
        forceKoreanPartnerProgramTranslation();
      }, 500);
      setTimeout(() => {
        forceKoreanPartnerProgramTranslation();
      }, 1000);
    }
  });

  function updatePartnerProgramContent(lang: string) {
    const translations = {
      ja: {
        title: "共創パートナー優待制度",
        subtitle: "長期的なパートナーシップに基づく特別価格",
        heading: "Cor.株式会社の他のサービスをご利用中のお客様へ",
        description:
          "Cor.株式会社の他のサービスを利用中の顧客には、長期的なパートナーシップに基づき特別価格で提供いたします。",
        contactNote: "詳細はお問い合わせください。",
        benefits: {
          specialPrice: {
            title: "特別価格での提供",
            description: "既存顧客様限定の優待価格",
          },
          prioritySupport: {
            title: "優先サポート",
            description: "専任担当者によるサポート",
          },
          customization: {
            title: "カスタマイズ対応",
            description: "お客様のニーズに合わせた調整",
          },
          longTermPartnership: {
            title: "長期パートナーシップ",
            description: "継続的な関係構築",
          },
        },
        ctaButton: "お問い合わせ",
        additionalInfo:
          "この制度は公式サイト（cor-jp.com）の内容に基づいています",
      },
      en: {
        title: "Co-creation Partner Program",
        subtitle: "Special pricing based on long-term partnership",
        heading: "To customers using other services of Cor. Co., Ltd.",
        description:
          "For customers using other services of Cor. Co., Ltd., we provide special pricing based on long-term partnership.",
        contactNote: "Please contact us for details.",
        benefits: {
          specialPrice: {
            title: "Special Pricing",
            description:
              "Exclusive preferential pricing for existing customers",
          },
          prioritySupport: {
            title: "Priority Support",
            description: "Support by dedicated staff",
          },
          customization: {
            title: "Customization Support",
            description: "Adjustments tailored to customer needs",
          },
          longTermPartnership: {
            title: "Long-term Partnership",
            description: "Continuous relationship building",
          },
        },
        ctaButton: "Contact Us",
        additionalInfo:
          "This program is based on the content of the official website (cor-jp.com)",
      },
      zh: {
        title: "共创合作伙伴优待制度",
        subtitle: "基于长期合作伙伴关系的特别价格",
        heading: "致使用Cor.株式会社其他服务的客户",
        description:
          "对于使用Cor.株式会社其他服务的客户，我们将基于长期合作伙伴关系提供特别价格。",
        contactNote: "详情请联系我们。",
        benefits: {
          specialPrice: {
            title: "特别价格提供",
            description: "现有客户专享优待价格",
          },
          prioritySupport: {
            title: "优先支持",
            description: "专职人员支持",
          },
          customization: {
            title: "定制化支持",
            description: "根据客户需求调整",
          },
          longTermPartnership: {
            title: "长期合作伙伴关系",
            description: "持续的关系建设",
          },
        },
        ctaButton: "联系我们",
        additionalInfo: "此制度基于官方网站（cor-jp.com）的内容",
      },
      es: {
        title: "Programa de Socios de Co-creación",
        subtitle: "Precios especiales basados en asociación a largo plazo",
        heading: "Para clientes que utilizan otros servicios de Cor. Co., Ltd.",
        description:
          "Para clientes que utilizan otros servicios de Cor. Co., Ltd., ofrecemos precios especiales basados en asociación a largo plazo.",
        contactNote: "Por favor contáctanos para más detalles.",
        benefits: {
          specialPrice: {
            title: "Precios Especiales",
            description:
              "Precios preferenciales exclusivos para clientes existentes",
          },
          prioritySupport: {
            title: "Soporte Prioritario",
            description: "Soporte por personal dedicado",
          },
          customization: {
            title: "Soporte de Personalización",
            description: "Ajustes adaptados a las necesidades del cliente",
          },
          longTermPartnership: {
            title: "Asociación a Largo Plazo",
            description: "Construcción continua de relaciones",
          },
        },
        ctaButton: "Contáctanos",
        additionalInfo:
          "Este programa se basa en el contenido del sitio web oficial (cor-jp.com)",
      },
      ko: {
        title: "공동 창조 파트너 우대 제도",
        subtitle: "장기적인 파트너십에 기반한 특별 가격",
        heading: "Cor.주식회사의 다른 서비스를 이용 중인 고객님께",
        description:
          "Cor.주식회사의 다른 서비스를 이용 중인 고객에게는 장기적인 파트너십에 기반하여 특별 가격으로 제공합니다.",
        contactNote: "자세한 내용은 문의해 주세요.",
        benefits: {
          specialPrice: {
            title: "특별 가격 제공",
            description: "기존 고객 전용 우대 가격",
          },
          prioritySupport: {
            title: "우선 지원",
            description: "전담 담당자 지원",
          },
          customization: {
            title: "맞춤형 지원",
            description: "고객 니즈에 맞춘 조정",
          },
          longTermPartnership: {
            title: "장기 파트너십",
            description: "지속적인 관계 구축",
          },
        },
        ctaButton: "문의하기",
        additionalInfo:
          "이 제도는 공식 사이트(cor-jp.com)의 내용에 기반합니다",
      },
    };

    const t = (translations as any)[lang] || translations["ja"];

    // Update main title and subtitle
    const titleElement = document.getElementById("partner-program-title");
    if (titleElement) {
      titleElement.textContent = t.title;
    }
    const subtitleElement = document.getElementById("partner-program-subtitle");
    if (subtitleElement) {
      subtitleElement.textContent = t.subtitle;
    }

    // Update heading
    const headingElement = document.getElementById("partner-program-heading");
    if (headingElement) {
      headingElement.textContent = t.heading;
    }

    // Update description and contact note
    const descriptionElement = document.getElementById(
      "partner-program-description",
    );
    if (descriptionElement) {
      descriptionElement.textContent = t.description;
    }
    const contactNoteElement = document.getElementById(
      "partner-program-contact-note",
    );
    if (contactNoteElement) {
      contactNoteElement.textContent = t.contactNote;
    }

    // Update benefits
    const specialPriceTitleElement = document.getElementById(
      "benefit-special-price-title",
    );
    if (specialPriceTitleElement) {
      specialPriceTitleElement.textContent = t.benefits.specialPrice.title;
    }
    const specialPriceDescElement = document.getElementById(
      "benefit-special-price-description",
    );
    if (specialPriceDescElement) {
      specialPriceDescElement.textContent = t.benefits.specialPrice.description;
    }

    const prioritySupportTitleElement = document.getElementById(
      "benefit-priority-support-title",
    );
    if (prioritySupportTitleElement) {
      prioritySupportTitleElement.textContent =
        t.benefits.prioritySupport.title;
    }
    const prioritySupportDescElement = document.getElementById(
      "benefit-priority-support-description",
    );
    if (prioritySupportDescElement) {
      prioritySupportDescElement.textContent =
        t.benefits.prioritySupport.description;
    }

    const customizationTitleElement = document.getElementById(
      "benefit-customization-title",
    );
    if (customizationTitleElement) {
      customizationTitleElement.textContent = t.benefits.customization.title;
    }
    const customizationDescElement = document.getElementById(
      "benefit-customization-description",
    );
    if (customizationDescElement) {
      customizationDescElement.textContent =
        t.benefits.customization.description;
    }

    const longTermPartnershipTitleElement = document.getElementById(
      "benefit-long-term-partnership-title",
    );
    if (longTermPartnershipTitleElement) {
      longTermPartnershipTitleElement.textContent =
        t.benefits.longTermPartnership.title;
    }
    const longTermPartnershipDescElement = document.getElementById(
      "benefit-long-term-partnership-description",
    );
    if (longTermPartnershipDescElement) {
      longTermPartnershipDescElement.textContent =
        t.benefits.longTermPartnership.description;
    }

    // Update CTA button
    const ctaButtonElement = document.getElementById(
      "partner-program-cta-button",
    );
    if (ctaButtonElement) {
      ctaButtonElement.textContent = t.ctaButton;
    }

    // Update additional info
    const additionalInfoElement = document.getElementById(
      "partner-program-additional-info",
    );
    if (additionalInfoElement) {
      additionalInfoElement.textContent = t.additionalInfo;
    }
  }

  function forceKoreanPartnerProgramTranslation() {
    // Debug output removed
    
    // Force update main title and subtitle
    const titleElement = document.getElementById('partner-program-title');
    if (titleElement) {
      titleElement.textContent = '공동 창조 파트너 우대 제도';
      // Debug output removed
    }
    
    const subtitleElement = document.getElementById('partner-program-subtitle');
    if (subtitleElement) {
      subtitleElement.textContent = '장기적인 파트너십에 기반한 특별 가격';
      // Debug output removed
    }
    
    // Force update heading
    const headingElement = document.getElementById('partner-program-heading');
    if (headingElement) {
      headingElement.textContent = 'Cor.주식회사의 다른 서비스를 이용 중인 고객님께';
      // Debug output removed
    }
    
    // Force update description
    const descriptionElement = document.getElementById('partner-program-description');
    if (descriptionElement) {
      descriptionElement.textContent = 'Cor.주식회사의 다른 서비스를 이용 중인 고객에게는 장기적인 파트너십에 기반하여 특별 가격으로 제공합니다.';
      // Debug output removed
    }
    
    // Force update contact note
    const contactNoteElement = document.getElementById('partner-program-contact-note');
    if (contactNoteElement) {
      contactNoteElement.textContent = '자세한 내용은 문의해 주세요.';
      // Debug output removed
    }
    
    // Force update benefits
    const benefitTitles = ['특별 가격 제공', '우선 지원', '맞춤형 지원', '장기 파트너십'];
    const benefitDescriptions = [
      '기존 고객 전용 우대 가격',
      '전담 담당자 지원',
      '고객 니즈에 맞춘 조정',
      '지속적인 관계 구축'
    ];
    
    benefitTitles.forEach((title, index) => {
      const element = document.getElementById(`benefit-${index + 1}-title`);
      if (element) {
        element.textContent = title;
        // Debug output removed
      }
    });
    
    benefitDescriptions.forEach((description, index) => {
      const element = document.getElementById(`benefit-${index + 1}-description`);
      if (element) {
        element.textContent = description;
        // Debug output removed
      }
    });
    
    // Force update CTA button
    const ctaButton = document.getElementById('partner-program-cta');
    if (ctaButton) {
      ctaButton.textContent = '문의하기';
      // Debug output removed
    }
    
    // Force update additional info
    const additionalInfoElement = document.getElementById('partner-program-additional-info');
    if (additionalInfoElement) {
      additionalInfoElement.textContent = '이 제도는 공식 사이트(cor-jp.com)의 내용에 기반합니다';
      // Debug output removed
    }
  }
</script>
