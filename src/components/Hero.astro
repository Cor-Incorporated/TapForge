---
// Hero Section for TapForge
import { getTranslation, type Language } from "../lib/i18n";

interface Props {
  lang: Language;
}

const { lang } = Astro.props;

// Get translations for the current language with fallback
const t = {
  title: lang === "ko" ? "탭으로 세계와 연결되세요." : getTranslation(lang, "hero.title"),
  subtitle: lang === "ko" ? "AI 기반 차세대 명함" : getTranslation(lang, "hero.subtitle"),
  description: lang === "ko" ? "으로 비즈니스를 가속화하세요" : getTranslation(lang, "hero.description"),
  subDescription: lang === "ko" ? "앱 불필요, 월 무료. NFC 탭 하나로 다국어 프로필을 공유하세요.\n프리랜서의 해외 프로젝트 획득을 지원합니다." : getTranslation(lang, "hero.subDescription"),
  cta: lang === "ko" ? "무료 체험 신청" : getTranslation(lang, "hero.cta"),
  limited: lang === "ko" ? "50명 한정!" : getTranslation(lang, "hero.limited"),
  features: {
    noApp: lang === "ko" ? "앱 불필요" : getTranslation(lang, "hero.features.noApp"),
    free: lang === "ko" ? "월 무료" : getTranslation(lang, "hero.features.free"),
    multilingual: lang === "ko" ? "4개국어 지원" : getTranslation(lang, "hero.features.multilingual"),
  }
};

// Debug: Log the language and translations
console.log("=== HERO COMPONENT DEBUG ===");
console.log("Hero - Language:", lang);
console.log("Hero - Language type:", typeof lang);
console.log("Hero - Is Korean?", lang === "ko");
console.log("Hero - Title:", t.title);
console.log("Hero - Subtitle:", t.subtitle);
console.log("Hero - Description:", t.description);
console.log("Hero - CTA:", t.cta);
console.log("Hero - Features:", t.features);
console.log("=== END HERO DEBUG ===");
---

<section
  class="bg-gradient-to-br from-white to-blue-50 min-h-screen flex items-center"
>
  <div class="container mx-auto px-4 py-16">
    <div class="max-w-4xl mx-auto">
      <!-- Main Content -->
      <div class="text-center">
        <!-- TapForge Brand Icon -->
        <div class="flex items-center justify-center mb-6">
          <img
            src="/images/favicon.png"
            alt="TapForge"
            class="w-16 h-16 rounded-xl shadow-lg"
          />
          <div class="ml-4">
            <h2 class="text-2xl font-bold text-gray-800">TapForge</h2>
            <p class="text-sm text-gray-600">NFC Digital Business Card</p>
          </div>
        </div>

        <h1
          class="text-4xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight"
          id="hero-title"
        >
          {lang === "ko" ? (
            <>
              <span class="text-red-500">탭</span>으로 <span class="text-blue-600">세계</span>와 연결되세요.<br />
              <span class="text-blue-600">AI 기반 차세대 명함</span>으로 비즈니스를 가속화하세요
            </>
          ) : (
            <>
              <span class="text-red-500">タップ</span>で<span class="text-blue-600">世界</span>と繋がる。<br />
              <span class="text-blue-600">AI駆動の次世代名刺</span>であなたのビジネスを加速
            </>
          )}
        </h1>

        <!-- Hero Image -->
        <div class="relative mb-8">
          <img
            src="/images/hero-demo.png"
            alt="TapForge NFC デモ"
            class="w-full h-48 md:h-64 object-cover rounded-2xl shadow-lg opacity-80"
          />
          <div
            class="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl"
          >
          </div>
        </div>

        <p
          class="text-xl text-gray-700 mb-8 leading-relaxed"
          id="hero-description"
        >
          {lang === "ko" ? (
            <>
              <span class="text-blue-600 font-semibold">AI 기반 차세대 명함</span>으로 비즈니스를 가속화하세요. 앱 불필요, 월 무료. NFC 탭 하나로 다국어 프로필을 공유하세요. 프리랜서의 해외 프로젝트 획득을 지원합니다.
            </>
          ) : (
            <>
              <span class="text-blue-600 font-semibold">AI駆動の次世代名刺</span>であなたのビジネスを加速。アプリ不要、月額無料。NFCタップ一つで多言語プロフィールを共有。フリーランサーの海外案件獲得を支援します。
            </>
          )}
        </p>

        <!-- CTA Button -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="#trial"
            class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl inline-flex items-center justify-center min-h-[48px]"
            id="hero-cta"
          >
            {lang === "ko" ? (
              <>
                <span class="text-red-500 font-bold mr-2">50명 한정!</span>
                무료 체험 신청
              </>
            ) : (
              <>
                <span class="text-red-500 font-bold mr-2">50名限定!</span>
                無料トライアル申し込み
              </>
            )}
          </a>
        </div>
        <!-- Trust Indicators -->
        <div
          class="mt-8 flex flex-wrap justify-center gap-6 text-sm text-gray-500"
          id="hero-features"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {lang === "ko" ? "앱 불필요" : "アプリ不要"}
          </div>
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {lang === "ko" ? "월 무료" : "月額無料"}
          </div>
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {lang === "ko" ? "4개국어 지원" : "4言語対応"}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Hero section language switching
  document.addEventListener("DOMContentLoaded", function () {
    // Get current language from URL or localStorage
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get("lang");
    const storedLang = localStorage.getItem("preferred-language");
    const currentLang = urlLang || storedLang || "ja";

    // Update hero content based on language
    updateHeroContent(currentLang);
  });

  function updateHeroContent(lang) {
    const translations = {
      ja: {
        title:
          '<span class="text-red-500">タップ</span>で<span class="text-blue-600">世界</span>と繋がる。<br><span class="text-blue-600">AI駆動の次世代名刺</span>であなたのビジネスを加速',
        description:
          '<span class="text-blue-600 font-semibold">AI駆動の次世代名刺</span>であなたのビジネスを加速。アプリ不要、月額無料。NFCタップ一つで多言語プロフィールを共有。フリーランサーの海外案件獲得を支援します。',
        cta: "無料トライアル申し込み",
        features: ["アプリ不要", "月額無料", "4言語対応"],
      },
      en: {
        title:
          '<span class="text-red-500">Tap</span> to connect with the <span class="text-blue-600">world</span>.<br><span class="text-blue-600">AI-powered next-generation business card</span> to accelerate your business',
        description:
          '<span class="text-blue-600 font-semibold">AI-powered next-generation business card</span> to accelerate your business. No app required, free monthly. Share multilingual profiles with one NFC tap. Supporting freelancers in acquiring overseas projects.',
        cta: "Apply for Free Trial",
        features: ["No App Required", "Free Monthly", "4 Languages"],
      },
      zh: {
        title:
          '<span class="text-red-500">轻触</span>连接<span class="text-blue-600">世界</span>。<br><span class="text-blue-600">AI驱动的下一代名片</span>加速您的业务',
        description:
          '<span class="text-blue-600 font-semibold">AI驱动的下一代名片</span>加速您的业务。无需应用，月费免费。一次NFC轻触即可分享多语言个人资料。支持自由职业者获得海外项目。',
        cta: "申请免费试用",
        features: ["无需应用", "月费免费", "4种语言"],
      },
      es: {
        title:
          '<span class="text-red-500">Toca</span> para conectar con el <span class="text-blue-600">mundo</span>.<br><span class="text-blue-600">Tarjeta de presentación de próxima generación</span> impulsada por IA para acelerar tu negocio',
        description:
          '<span class="text-blue-600 font-semibold">Tarjeta de presentación de próxima generación</span> impulsada por IA para acelerar tu negocio. Sin aplicación requerida, mensualidad gratuita. Comparte perfiles multilingües con un toque NFC. Apoyando a freelancers en la adquisición de proyectos en el extranjero.',
        cta: "Solicitar Prueba Gratuita",
        features: ["Sin App Requerida", "Mensualidad Gratuita", "4 Idiomas"],
      },
    };

    const t = translations[lang] || translations["ja"];

    // Update title
    const titleElement = document.getElementById("hero-title");
    if (titleElement) {
      titleElement.innerHTML = t.title;
    }

    // Update description
    const descElement = document.getElementById("hero-description");
    if (descElement) {
      descElement.innerHTML = t.description;
    }

    // Update CTA button
    const ctaElement = document.getElementById("hero-cta");
    if (ctaElement) {
      const limitedText = {
        ja: "50名限定!",
        en: "Limited to 50!",
        zh: "限50名！",
        es: "¡Limitado a 50!",
      };
      ctaElement.innerHTML = `<span class="text-red-500 font-bold mr-2">${limitedText[lang] || limitedText["ja"]}</span>${t.cta}`;
    }

    // Update features
    const featuresElement = document.getElementById("hero-features");
    if (featuresElement) {
      const featureDivs =
        featuresElement.querySelectorAll(".flex.items-center");
      featureDivs.forEach((div, index) => {
        if (t.features[index]) {
          const textNode = div.childNodes[div.childNodes.length - 1];
          if (textNode && textNode.nodeType === Node.TEXT_NODE) {
            textNode.textContent = t.features[index];
          }
        }
      });
    }
  }
</script>
