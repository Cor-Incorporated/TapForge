---
// Hero Section for TapForge
import { getTranslation, type Language } from "../lib/i18n";

interface Props {
  lang: Language;
}

const { lang = "ja" } = Astro.props;

// Get translations for the current language
const t = {
  title: getTranslation(lang, "hero.title"),
  subtitle: getTranslation(lang, "hero.subtitle"),
  description: getTranslation(lang, "hero.description"),
  subDescription: getTranslation(lang, "hero.subDescription"),
  cta: getTranslation(lang, "hero.cta"),
  limited: getTranslation(lang, "hero.limited"),
  features: {
    noApp: getTranslation(lang, "hero.features.noApp"),
    free: getTranslation(lang, "hero.features.free"),
    multilingual: getTranslation(lang, "hero.features.multilingual"),
  }
};

// Language-specific limited text
const limitedText = {
  ja: "100名限定!",
  en: "Limited to 100!",
  zh: "限100名！",
  ko: "100명 한정!",
  es: "¡Limitado a 100!"
};

const currentLimited = limitedText[lang] || limitedText.ja;
---

<section
  class="bg-gradient-to-br from-white to-blue-50 min-h-screen flex items-center"
>
  <div class="container mx-auto px-4 py-16">
    <div class="max-w-4xl mx-auto">
      <!-- Main Content -->
      <div class="text-center">
        <!-- TapForge Brand Icon -->
        <div class="flex items-center justify-center mb-6">
          <img
            src="/images/favicon.png"
            alt="TapForge NFCデジタル名刺ロゴ"
            class="w-16 h-16 rounded-xl shadow-lg"
          />
          <div class="ml-4">
            <h2 class="text-2xl font-bold text-gray-800">TapForge</h2>
            <p class="text-sm text-gray-600">NFC Digital Business Card</p>
          </div>
        </div>

        <h1
          class="text-4xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight"
          id="hero-title"
        >
          {lang === "en" ? (
            <>
              <span class="text-red-500">Tap</span> to connect with the <span class="text-blue-600">world</span>.<br />
              Starting at ¥500/month<br />
              Next-generation digital business card
            </>
          ) : lang === "zh" ? (
            <>
              <span class="text-red-500">轻触</span>连接<span class="text-blue-600">世界</span>。<br />
              月费¥500起<br />
              AI驱动的下一代名片
            </>
          ) : lang === "ko" ? (
            <>
              <span class="text-red-500">탭</span>으로 <span class="text-blue-600">세계</span>와 연결되세요.<br />
              월액 500엔으로 시작하는<br />
              차세대 디지털 명함
            </>
          ) : lang === "es" ? (
            <>
              <span class="text-red-500">Toca</span> para conectar con el <span class="text-blue-600">mundo</span>.<br />
              Desde ¥500/mes<br />
              Tarjeta de presentación de próxima generación
            </>
          ) : (
            <>
              <span class="text-red-500">タップ</span>で<span class="text-blue-600">世界</span>と繋がる。<br />
              月額500円で始める<br />
              次世代デジタル名刺
            </>
          )}
        </h1>

        <!-- Hero Image -->
        <div class="relative mb-8">
          <img
            src="/images/hero-demo.png"
            alt="TapForge NFCデジタル名刺デモンストレーション - AI駆動の次世代名刺"
            class="w-full h-48 md:h-64 object-cover rounded-2xl shadow-lg opacity-80"
          />
          <div
            class="absolute inset-0 bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-2xl"
          >
          </div>
        </div>

        <p
          class="text-xl text-gray-700 mb-8 leading-relaxed"
          id="hero-description"
        >
          {lang === "en" ? (
            <>
              <span class="text-blue-600 font-semibold">AI-powered next-generation business card</span> to accelerate your business. No app required, <span class="font-bold">from ¥500/month</span>. Share multilingual profiles with one NFC tap. Supporting freelancers in acquiring overseas projects.
            </>
          ) : lang === "zh" ? (
            <>
              <span class="text-blue-600 font-semibold">AI驱动的下一代名片</span>加速您的业务。无需应用，<span class="font-bold">月费¥500起</span>。一次NFC轻触即可分享多语言个人资料。支持自由职业者获得海外项目。
            </>
          ) : lang === "ko" ? (
            <>
              <span class="text-blue-600 font-semibold">AI 기반 차세대 명함</span>으로 비즈니스를 가속화하세요. 앱 불필요, <span class="font-bold">월액 500엔부터</span>. NFC 탭 하나로 다국어 프로필을 공유하세요. 프리랜서의 해외 프로젝트 획득을 지원합니다.
            </>
          ) : lang === "es" ? (
            <>
              <span class="text-blue-600 font-semibold">Tarjeta de presentación de próxima generación</span> impulsada por IA para acelerar tu negocio. Sin aplicación requerida, <span class="font-bold">desde ¥500/mes</span>. Comparte perfiles multilingües con un toque NFC. Apoyando a freelancers en la adquisición de proyectos en el extranjero.
            </>
          ) : (
            <>
              <span class="text-blue-600 font-semibold">AI駆動の次世代名刺</span>であなたのビジネスを加速。アプリ不要、<span class="font-bold">月額500円から</span>。NFCタップ一つで多言語プロフィールを共有。フリーランサーの海外案件獲得を支援します。
            </>
          )}
        </p>

        <!-- CTA Button -->
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="#trial"
            class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl inline-flex items-center justify-center min-h-[48px]"
            id="hero-cta"
          >
            <span class="text-red-500 font-bold mr-2">{currentLimited}</span>
            {t.cta}
          </a>
        </div>
        <!-- Trust Indicators -->
        <div
          class="mt-8 flex flex-wrap justify-center gap-6 text-sm text-gray-500"
          id="hero-features"
        >
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {t.features.noApp}
          </div>
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {lang === "ko" ? "월액 500엔~" : lang === "en" ? "From ¥500/month" : lang === "zh" ? "月费¥500起" : lang === "es" ? "Desde ¥500/mes" : "月額500円～"}
          </div>
          <div class="flex items-center">
            <svg
              class="w-5 h-5 text-green-500 mr-2"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                fill-rule="evenodd"
                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                clip-rule="evenodd"></path>
            </svg>
            {t.features.multilingual}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Hero section language switching is disabled to prevent XSS issues
  // The content is rendered server-side based on the language parameter
  /*
  document.addEventListener("DOMContentLoaded", function () {
    // Get current language from URL or localStorage
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get("lang");
    const storedLang = localStorage.getItem("preferred-language");
    const currentLang = urlLang || storedLang || "ja";

    // Update hero content based on language
    updateHeroContent(currentLang);
  });
  */

  // This function is disabled to prevent XSS issues
  // Content is now rendered server-side based on the language parameter
  /*
  function updateHeroContent(lang: string) {
    const translations = {
      ja: {
        title:
          '<span class="text-red-500">タップ</span>で<span class="text-blue-600">世界</span>と繋がる。<br>月額500円で始める<br>次世代デジタル名刺',
        description:
          '<span class="text-blue-600 font-semibold">AI駆動の次世代名刺</span>であなたのビジネスを加速。アプリ不要、<span class="font-bold">月額500円から</span>。NFCタップ一つで多言語プロフィールを共有。フリーランサーの海外案件獲得を支援します。',
        cta: "早期アクセスに申し込む",
        features: ["アプリ不要", "月額500円～", "4言語対応"],
      },
      en: {
        title:
          '<span class="text-red-500">Tap</span> to connect with the <span class="text-blue-600">world</span>.<br>Starting at ¥500/month<br>Next-generation digital business card',
        description:
          '<span class="text-blue-600 font-semibold">AI-powered next-generation business card</span> to accelerate your business. No app required, <span class="font-bold">from ¥500/month</span>. Share multilingual profiles with one NFC tap. Supporting freelancers in acquiring overseas projects.',
        cta: "Apply for Early Access",
        features: ["No App Required", "From ¥500/month", "4 Languages"],
      },
      zh: {
        title:
          '<span class="text-red-500">轻触</span>连接<span class="text-blue-600">世界</span>。<br>月费¥500起<br>AI驱动的下一代名片',
        description:
          '<span class="text-blue-600 font-semibold">AI驱动的下一代名片</span>加速您的业务。无需应用，<span class="font-bold">月费¥500起</span>。一次NFC轻触即可分享多语言个人资料。支持自由职业者获得海外项目。',
        cta: "申请早期访问",
        features: ["无需应用", "月费¥500起", "4种语言"],
      },
      ko: {
        title:
          '<span class="text-red-500">탭</span>으로 <span class="text-blue-600">세계</span>와 연결되세요.<br>월액 500엔으로 시작하는<br>차세대 디지털 명함',
        description:
          '<span class="text-blue-600 font-semibold">AI 기반 차세대 명함</span>으로 비즈니스를 가속화하세요. 앱 불필요, <span class="font-bold">월액 500엔부터</span>. NFC 탭 하나로 다국어 프로필을 공유하세요. 프리랜서의 해외 프로젝트 획득을 지원합니다.',
        cta: "조기 액세스 신청",
        features: ["앱 불필요", "월액 500엔~", "4개국어 지원"],
      },
      es: {
        title:
          '<span class="text-red-500">Toca</span> para conectar con el <span class="text-blue-600">mundo</span>.<br>Desde ¥500/mes<br>Tarjeta de presentación de próxima generación',
        description:
          '<span class="text-blue-600 font-semibold">Tarjeta de presentación de próxima generación</span> impulsada por IA para acelerar tu negocio. Sin aplicación requerida, <span class="font-bold">desde ¥500/mes</span>. Comparte perfiles multilingües con un toque NFC. Apoyando a freelancers en la adquisición de proyectos en el extranjero.',
        cta: "Solicitar Acceso Anticipado",
        features: ["Sin App Requerida", "Desde ¥500/mes", "4 Idiomas"],
      },
    };

    const t = translations[lang as keyof typeof translations] || translations["ja"];

    // Update title
    const titleElement = document.getElementById("hero-title");
    if (titleElement) {
      titleElement.textContent = t.title;
    }

    // Update description
    const descElement = document.getElementById("hero-description");
    if (descElement) {
      descElement.textContent = t.description;
    }

    // Update CTA button
    const ctaElement = document.getElementById("hero-cta");
    if (ctaElement) {
      const limitedText = {
        ja: "100名限定!",
        en: "Limited to 100!",
        zh: "限100名！",
        ko: "100명 한정!",
        es: "¡Limitado a 100!",
      };
      // Clear existing content
      ctaElement.textContent = '';

      // Create limited text span
      const limitedSpan = document.createElement('span');
      limitedSpan.className = 'text-red-500 font-bold mr-2';
      limitedSpan.textContent = limitedText[lang as keyof typeof limitedText] || limitedText["ja"];

      // Add text node for CTA
      const ctaText = document.createTextNode(t.cta);

      ctaElement.appendChild(limitedSpan);
      ctaElement.appendChild(ctaText);
    }

    // Update features
    const featuresElement = document.getElementById("hero-features");
    if (featuresElement) {
      const featureDivs =
        featuresElement.querySelectorAll(".flex.items-center");
      featureDivs.forEach((div, index) => {
        if (t.features[index]) {
          const textNode = div.childNodes[div.childNodes.length - 1];
          if (textNode && textNode.nodeType === Node.TEXT_NODE) {
            textNode.textContent = t.features[index];
          }
        }
      });
    }
  }
  */
</script>