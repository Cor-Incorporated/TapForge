---
// CTA Section with integrated Trial Form
---

<section class="py-20 bg-gradient-to-br from-blue-600 to-purple-700">
  <div class="container mx-auto px-4">
    <div class="text-center text-white">
      <div class="flex items-center justify-center mb-6">
        <img
          src="/images/favicon.png"
          alt="TapForge"
          class="w-16 h-16 rounded-xl shadow-lg mr-4"
        />
        <h2 class="text-3xl md:text-4xl font-bold" id="cta-title">
          今すぐ始めませんか？
        </h2>
      </div>
      <p class="text-xl mb-12 opacity-90" id="cta-description">
        50名限定の無料トライアルで、TapForgeの力を体験してください
      </p>

      <!-- Trial Form Section -->
      <div class="mb-12 max-w-2xl mx-auto">
        <div class="bg-white rounded-2xl shadow-xl p-8">
          <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-900 mb-4" id="trial-title">
              無料トライアルについて
            </h2>
            <p class="text-lg text-gray-600 mb-2">
              <span class="text-red-500 font-bold" id="trial-limited"
                >50名限定!</span
              >
              <span id="trial-description"
                >あなたの名刺を1枚無料で作成します。</span
              >
            </p>
            <p class="text-sm text-gray-500" id="trial-sub-description">
              デザイン変更無制限、OCR名刺読み取り機能・VCard変換利用可
            </p>
          </div>

          <!-- Trial Application -->
          <div class="bg-gray-50 rounded-lg p-6">
            <div class="text-center">
              <h3
                class="text-xl font-semibold text-gray-800 mb-4"
                id="trial-form-title"
              >
                無料トライアル申し込み
              </h3>
              <p class="text-gray-600 mb-6" id="trial-form-description">
                今すぐ無料トライアルに申し込んで、TapForgeの力を体験してください。
              </p>
              <a
                href="#trial"
                class="bg-blue-500 hover:bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl inline-flex items-center justify-center min-h-[48px]"
                id="trial-form-button"
              >
                <span
                  class="text-red-500 font-bold mr-2"
                  id="trial-form-limited">50名限定!</span
                >
                <span id="trial-form-button-text">無料トライアル申し込み</span>
              </a>
            </div>
          </div>
          <!-- Terms and Conditions -->
          <div class="mt-6 text-center">
            <p class="text-xs text-gray-500" id="terms-text">
              <span id="terms-text-start">申し込みにより、</span><a
                href="/terms"
                class="text-blue-600 hover:underline"
                id="terms-link"
                data-link="terms">利用規約</a
              ><span id="terms-and">および</span><a
                href="/privacy"
                class="text-blue-600 hover:underline"
                id="privacy-link"
                data-link="privacy">プライバシーポリシー</a
              ><span id="terms-text-end">に同意したものとみなされます。</span>
            </p>
          </div>
        </div>
      </div>

      <!-- Trust Indicators -->
      <div
        class="mt-12 flex flex-wrap justify-center gap-8 text-sm opacity-80"
        id="cta-features"
      >
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-green-400 mr-2"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
              clip-rule="evenodd"></path>
          </svg>
          <span id="cta-feature-1">アプリ不要</span>
        </div>
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-green-400 mr-2"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
              clip-rule="evenodd"></path>
          </svg>
          <span id="cta-feature-2">月額無料</span>
        </div>
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-green-400 mr-2"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
              clip-rule="evenodd"></path>
          </svg>
          <span id="cta-feature-3">4言語対応</span>
        </div>
        <div class="flex items-center">
          <svg
            class="w-5 h-5 text-green-400 mr-2"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              fill-rule="evenodd"
              d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
              clip-rule="evenodd"></path>
          </svg>
          <span id="cta-feature-4">AI名刺撮影</span>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Language translations for CTA component
  const ctaTranslations = {
    ja: {
      cta: {
        title: "今すぐ始めませんか？",
        description:
          "50名限定の無料トライアルで、TapForgeの力を体験してください",
        limited: "50名限定!",
        trialButton: "無料トライアル申し込み",
        contactButton: "お問い合わせはこちら",
        features: [
          "アプリ不要",
          "月額無料",
          "4言語対応",
          "OCR名刺読み取り機能",
        ],
      },
      trial: {
        title: "無料トライアルについて",
        limited: "50名限定!",
        description: "あなたの名刺を1枚無料で作成します。",
        subDescription:
          "デザイン変更無制限、OCR名刺読み取り機能・VCard変換利用可",
        trialFormTitle: "無料トライアル申し込み",
        trialFormDescription:
          "今すぐ無料トライアルに申し込んで、TapForgeの力を体験してください。",
        trialFormButton: "無料トライアル申し込み",
        trialFormLimited: "50名限定!",
        termsTextStart: "申し込みにより、",
        termsLink: "利用規約",
        termsAnd: "および",
        privacyLink: "プライバシーポリシー",
        termsTextEnd: "に同意したものとみなされます。",
      },
    },
    en: {
      cta: {
        title: "Ready to get started?",
        description:
          "Experience the power of TapForge with our limited free trial for 50 people",
        limited: "Limited to 50!",
        trialButton: "Apply for Free Trial",
        contactButton: "Contact Us Here",
        features: [
          "No App Required",
          "Free Monthly",
          "4 Languages",
          "OCR Business Card Reading",
        ],
      },
      trial: {
        title: "About Free Trial",
        limited: "Limited to 50!",
        description: "We'll create one business card for you for free.",
        subDescription:
          "Unlimited design changes, OCR business card reading & VCard conversion available",
        trialFormTitle: "Apply for Free Trial",
        trialFormDescription:
          "Apply for the free trial now and experience the power of TapForge.",
        trialFormButton: "Apply for Free Trial",
        trialFormLimited: "Limited to 50!",
        termsTextStart: "By applying, you agree to our ",
        termsLink: "Terms of Service",
        termsAnd: " and ",
        privacyLink: "Privacy Policy",
        termsTextEnd: ".",
      },
    },
    zh: {
      cta: {
        title: "准备开始了吗？",
        description: "通过我们限50人的免费试用体验TapForge的力量",
        limited: "限50名！",
        trialButton: "申请免费试用",
        contactButton: "联系我们",
        features: ["无需应用", "月费免费", "4种语言", "OCR名片读取"],
      },
      trial: {
        title: "关于免费试用",
        limited: "限50名！",
        description: "我们将为您免费制作一张名片。",
        subDescription: "无限设计更改，OCR名片读取和VCard转换可用",
        trialFormTitle: "申请免费试用",
        trialFormDescription: "立即申请免费试用，体验TapForge的力量。",
        trialFormButton: "申请免费试用",
        trialFormLimited: "限50名！",
        termsTextStart: "申请即表示您同意我们的",
        termsLink: "服务条款",
        termsAnd: "和",
        privacyLink: "隐私政策",
        termsTextEnd: "。",
      },
    },
    es: {
      cta: {
        title: "¿Listo para comenzar?",
        description:
          "Experimenta el poder de TapForge con nuestra prueba gratuita limitada para 50 personas",
        limited: "¡Limitado a 50!",
        trialButton: "Solicitar Prueba Gratuita",
        contactButton: "Contáctanos Aquí",
        features: [
          "Sin App Requerida",
          "Mensualidad Gratuita",
          "4 Idiomas",
          "Lectura OCR de Tarjetas",
        ],
      },
      trial: {
        title: "Acerca de la Prueba Gratuita",
        limited: "¡Limitado a 50!",
        description: "Crearemos una tarjeta de presentación gratis para ti.",
        subDescription:
          "Cambios de diseño ilimitados, lectura OCR de tarjetas y conversión VCard disponibles",
        trialFormTitle: "Solicitar Prueba Gratuita",
        trialFormDescription:
          "Solicita la prueba gratuita ahora y experimenta el poder de TapForge.",
        trialFormButton: "Solicitar Prueba Gratuita",
        trialFormLimited: "¡Limitado a 50!",
        termsTextStart: "Al solicitar, aceptas nuestros ",
        termsLink: "Términos de Servicio",
        termsAnd: " y ",
        privacyLink: "Política de Privacidad",
        termsTextEnd: ".",
      },
    },
  };

  // Helper function to update element text content
  function updateElement(id: string, text: string) {
    const element = document.getElementById(id);
    if (element) element.textContent = text;
  }

  // Helper function to update element attribute
  function updateElementAttr(id: string, attr: string, value: string) {
    const element = document.getElementById(id);
    if (element) element.setAttribute(attr, value);
  }

  // Get current language
  function getCurrentLanguage() {
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get("lang");
    const storedLang = localStorage.getItem("preferred-language");
    return urlLang || storedLang || "ja";
  }

  // Update CTA content
  function updateCTAContent(lang: string) {
    const translations =
      ctaTranslations[lang as keyof typeof ctaTranslations] ||
      ctaTranslations["ja"];
    const cta = translations.cta;
    const trial = translations.trial;

    // Update CTA section
    updateElement("cta-title", cta.title);
    updateElement("cta-description", cta.description);
    updateElement("cta-contact-text", cta.contactButton);

    // Update features
    cta.features.forEach((feature: string, index: number) => {
      updateElement(`cta-feature-${index + 1}`, feature);
    });

    // Update trial form section
    updateElement("trial-title", trial.title);
    updateElement("trial-limited", trial.limited);
    updateElement("trial-description", trial.description);
    updateElement("trial-sub-description", trial.subDescription);
    updateElement("trial-form-title", trial.trialFormTitle);
    updateElement("trial-form-description", trial.trialFormDescription);
    updateElement("trial-form-button-text", trial.trialFormButton);
    updateElement("trial-form-limited", trial.trialFormLimited);

    // Update terms and privacy
    updateElement("terms-text-start", trial.termsTextStart);
    updateElement("terms-link", trial.termsLink);
    updateElement("terms-and", trial.termsAnd);
    updateElement("privacy-link", trial.privacyLink);
    updateElement("terms-text-end", trial.termsTextEnd);

    // Update links with language parameter
    const termsHref = lang === "ja" ? "/terms" : `/terms?lang=${lang}`;
    const privacyHref = lang === "ja" ? "/privacy" : `/privacy?lang=${lang}`;
    updateElementAttr("terms-link", "href", termsHref);
    updateElementAttr("privacy-link", "href", privacyHref);
  }

  // Initialize on DOMContentLoaded
  document.addEventListener("DOMContentLoaded", function () {
    const currentLang = getCurrentLanguage();
    updateCTAContent(currentLang);

    // Smooth scrolling for trial links
    document.querySelectorAll('a[href="#trial"]').forEach((link) => {
      link.addEventListener("click", function (e) {
        e.preventDefault();
        const trialSection = document.getElementById("trial");
        if (trialSection) {
          trialSection.scrollIntoView({ behavior: "smooth", block: "start" });
        }
      });
    });

    // Track trial form clicks
    const trialButtons = document.querySelectorAll('a[href="#trial"]');
    trialButtons.forEach((button) => {
      button.addEventListener("click", function () {
        if (typeof window !== "undefined" && (window as any).gtag) {
          (window as any).gtag("event", "trial_form_click", {
            event_category: "trial_form",
            event_label: "trial_form_clicked",
          });
        }
      });
    });
  });
</script>
